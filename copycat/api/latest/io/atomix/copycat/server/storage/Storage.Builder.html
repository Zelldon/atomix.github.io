<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Storage.Builder (Copycat API Reference (latest))</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Storage.Builder (Copycat API Reference (latest))";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Storage.Builder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../io/atomix/copycat/server/storage/StorageCleaner.html" title="class in io.atomix.copycat.server.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?io/atomix/copycat/server/storage/Storage.Builder.html" target="_top">Frames</a></li>
<li><a href="Storage.Builder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.atomix.copycat.server.storage</div>
<h2 title="Class Storage.Builder" class="title">Class Storage.Builder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="http://atomix.io/catalyst/api/latest/io/atomix/catalyst/util/Builder.html?is-external=true" title="class or interface in io.atomix.catalyst.util">io.atomix.catalyst.util.Builder</a>&lt;<a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage">Storage</a>&gt;</li>
<li>
<ul class="inheritance">
<li>io.atomix.copycat.server.storage.Storage.Builder</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage">Storage</a></dd>
</dl>
<hr>
<br>
<pre>public static class <span class="typeNameLabel">Storage.Builder</span>
extends <a href="http://atomix.io/catalyst/api/latest/io/atomix/catalyst/util/Builder.html?is-external=true" title="class or interface in io.atomix.catalyst.util">Builder</a>&lt;<a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage">Storage</a>&gt;</pre>
<div class="block">Builds a <a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><code>Storage</code></a> configuration.
 <p>
 The storage builder provides simplifies building more complex <a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><code>Storage</code></a> configurations. To
 create a storage builder, use the <a href="../../../../../io/atomix/copycat/server/storage/Storage.html#builder--"><code>Storage.builder()</code></a> factory method. Set properties of the configured
 <code>Storage</code> object with the various <code>with*</code> methods. Once the storage has been configured,
 call <a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#build--"><code>build()</code></a> to build the object.
 <pre>
   <code>
   Storage storage = Storage.builder()
     .withDirectory(new File("logs"))
     .withPersistenceLevel(PersistenceLevel.DISK)
     .build();
   </code>
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage">Storage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#build--">build</a></span>()</code>
<div class="block">Builds the <a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><code>Storage</code></a> object.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withCompactionThreads-int-">withCompactionThreads</a></span>(int&nbsp;compactionThreads)</code>
<div class="block">Sets the number of log compaction threads, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withCompactionThreshold-double-">withCompactionThreshold</a></span>(double&nbsp;threshold)</code>
<div class="block">Sets the percentage of entries in the segment that must be cleaned before a segment can be compacted,
 returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withDirectory-java.io.File-">withDirectory</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;directory)</code>
<div class="block">Sets the log directory, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withDirectory-java.lang.String-">withDirectory</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;directory)</code>
<div class="block">Sets the log directory, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withMajorCompactionInterval-java.time.Duration-">withMajorCompactionInterval</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html?is-external=true" title="class or interface in java.time">Duration</a>&nbsp;interval)</code>
<div class="block">Sets the major compaction interval, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withMaxEntriesPerSegment-int-">withMaxEntriesPerSegment</a></span>(int&nbsp;maxEntriesPerSegment)</code>
<div class="block">Sets the maximum number of allows entries per segment, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withMaxSegmentSize-int-">withMaxSegmentSize</a></span>(int&nbsp;maxSegmentSize)</code>
<div class="block">Sets the maximum segment size in bytes, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withMaxSnapshotSize-int-">withMaxSnapshotSize</a></span>(int&nbsp;maxSnapshotSize)</code>
<div class="block">Sets the maximum size of snapshot files on disk, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withMinorCompactionInterval-java.time.Duration-">withMinorCompactionInterval</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html?is-external=true" title="class or interface in java.time">Duration</a>&nbsp;interval)</code>
<div class="block">Sets the minor compaction interval, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withRetainStaleSnapshots--">withRetainStaleSnapshots</a></span>()</code>
<div class="block">Sets whether to retain stale snapshots on disk, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withRetainStaleSnapshots-boolean-">withRetainStaleSnapshots</a></span>(boolean&nbsp;retainStaleSnapshots)</code>
<div class="block">Sets whether to retain stale snapshots on disk, returning the builder for method chaining.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html#withStorageLevel-io.atomix.copycat.server.storage.StorageLevel-">withStorageLevel</a></span>(<a href="../../../../../io/atomix/copycat/server/storage/StorageLevel.html" title="enum in io.atomix.copycat.server.storage">StorageLevel</a>&nbsp;storageLevel)</code>
<div class="block">Sets the log storage level, returning the builder for method chaining.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="withStorageLevel-io.atomix.copycat.server.storage.StorageLevel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withStorageLevel</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withStorageLevel(<a href="../../../../../io/atomix/copycat/server/storage/StorageLevel.html" title="enum in io.atomix.copycat.server.storage">StorageLevel</a>&nbsp;storageLevel)</pre>
<div class="block">Sets the log storage level, returning the builder for method chaining.
 <p>
 The storage level indicates how individual <a href="../../../../../io/atomix/copycat/server/storage/entry/Entry.html" title="class in io.atomix.copycat.server.storage.entry"><code>entries</code></a>
 should be persisted in the log.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storageLevel</code> - The log storage level.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
</dl>
</li>
</ul>
<a name="withDirectory-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withDirectory</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withDirectory(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;directory)</pre>
<div class="block">Sets the log directory, returning the builder for method chaining.
 <p>
 The log will write segment files into the provided directory. If multiple <a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><code>Storage</code></a> objects are located
 on the same machine, they write logs to different directories.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>directory</code> - The log directory.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - If the <code>directory</code> is <code>null</code></dd>
</dl>
</li>
</ul>
<a name="withDirectory-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withDirectory</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withDirectory(<a href="http://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;directory)</pre>
<div class="block">Sets the log directory, returning the builder for method chaining.
 <p>
 The log will write segment files into the provided directory. If multiple <a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><code>Storage</code></a> objects are located
 on the same machine, they write logs to different directories.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>directory</code> - The log directory.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - If the <code>directory</code> is <code>null</code></dd>
</dl>
</li>
</ul>
<a name="withMaxSegmentSize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withMaxSegmentSize</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withMaxSegmentSize(int&nbsp;maxSegmentSize)</pre>
<div class="block">Sets the maximum segment size in bytes, returning the builder for method chaining.
 <p>
 The maximum segment size dictates when logs should roll over to new segments. As entries are written to
 a segment of the log, once the size of the segment surpasses the configured maximum segment size, the
 log will create a new segment and append new entries to that segment.
 <p>
 By default, the maximum segment size is <code>1024 * 1024 * 32</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxSegmentSize</code> - The maximum segment size in bytes.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If the <code>maxSegmentSize</code> is not positive</dd>
</dl>
</li>
</ul>
<a name="withMaxEntriesPerSegment-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withMaxEntriesPerSegment</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withMaxEntriesPerSegment(int&nbsp;maxEntriesPerSegment)</pre>
<div class="block">Sets the maximum number of allows entries per segment, returning the builder for method chaining.
 <p>
 The maximum entry count dictates when logs should roll over to new segments. As entries are written to
 a segment of the log, if the entry count in that segment meets the configured maximum entry count, the
 log will create a new segment and append new entries to that segment.
 <p>
 By default, the maximum entries per segment is <code>1024 * 1024</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxEntriesPerSegment</code> - The maximum number of entries allowed per segment.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If the <code>maxEntriesPerSegment</code> not greater than the default max entries per
 segment</dd>
</dl>
</li>
</ul>
<a name="withMaxSnapshotSize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withMaxSnapshotSize</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withMaxSnapshotSize(int&nbsp;maxSnapshotSize)</pre>
<div class="block">Sets the maximum size of snapshot files on disk, returning the builder for method chaining.
 <p>
 The maximum snapshot size dictates the size in bytes of a single snapshot file on disk. Reducing the
 maximum snapshot file size can help ensure that the system is not bogged down with storing and replicating
 snapshots. By default, snapshots are practically unlimited with a 2GB limit, but in practice they should be
 fairly small.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxSnapshotSize</code> - The maximum snapshot size in bytes.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the <code>maxSnapshotSize</code> is not positive or is less than <code>64</code></dd>
</dl>
</li>
</ul>
<a name="withRetainStaleSnapshots--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withRetainStaleSnapshots</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withRetainStaleSnapshots()</pre>
<div class="block">Sets whether to retain stale snapshots on disk, returning the builder for method chaining.
 <p>
 As the system state progresses, periodic snapshots of the state machine's state are taken.
 Once a new snapshot of the state machine is taken, all preceding snapshots no longer contribute
 to the state of the system and can therefore be removed from disk. By default, snapshots will not
 be retained once a new snapshot is stored on disk. Enabling snapshot retention will ensure that
 all snapshots will be saved, e.g. for backup purposes.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
</dl>
</li>
</ul>
<a name="withRetainStaleSnapshots-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withRetainStaleSnapshots</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withRetainStaleSnapshots(boolean&nbsp;retainStaleSnapshots)</pre>
<div class="block">Sets whether to retain stale snapshots on disk, returning the builder for method chaining.
 <p>
 As the system state progresses, periodic snapshots of the state machine's state are taken.
 Once a new snapshot of the state machine is taken, all preceding snapshots no longer contribute
 to the state of the system and can therefore be removed from disk. By default, snapshots will not
 be retained once a new snapshot is stored on disk. Enabling snapshot retention will ensure that
 all snapshots will be saved, e.g. for backup purposes.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>retainStaleSnapshots</code> - Whether to retain stale snapshots on disk.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
</dl>
</li>
</ul>
<a name="withCompactionThreads-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withCompactionThreads</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withCompactionThreads(int&nbsp;compactionThreads)</pre>
<div class="block">Sets the number of log compaction threads, returning the builder for method chaining.
 <p>
 The compaction thread count dictates the parallelism with which the log
 <a href="../../../../../io/atomix/copycat/server/storage/compaction/Compactor.html" title="class in io.atomix.copycat.server.storage.compaction"><code>Compactor</code></a> can rewrite segments in the log. By default,
 the log uses <code>Runtime.getRuntime().availableProcessors() / 2</code> compaction threads.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>compactionThreads</code> - The number of log compaction threads.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>compactionThreads</code> is not positive</dd>
</dl>
</li>
</ul>
<a name="withMinorCompactionInterval-java.time.Duration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withMinorCompactionInterval</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withMinorCompactionInterval(<a href="http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html?is-external=true" title="class or interface in java.time">Duration</a>&nbsp;interval)</pre>
<div class="block">Sets the minor compaction interval, returning the builder for method chaining.
 <p>
 The minor compaction interval dictates the interval at which the
 <a href="../../../../../io/atomix/copycat/server/storage/compaction/MinorCompactionManager.html" title="class in io.atomix.copycat.server.storage.compaction"><code>MinorCompactionManager</code></a> should evaluate <a href="../../../../../io/atomix/copycat/server/storage/Segment.html" title="class in io.atomix.copycat.server.storage"><code>Segment</code></a>s
 in the log for minor compaction. It is recommended that the minor compaction interval be at least an order
 of magnitude smaller than the major compaction interval.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>interval</code> - The minor compaction interval.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../io/atomix/copycat/server/storage/compaction/MinorCompactionManager.html" title="class in io.atomix.copycat.server.storage.compaction"><code>MinorCompactionManager</code></a>, 
<a href="../../../../../io/atomix/copycat/server/storage/compaction/MinorCompactionTask.html" title="class in io.atomix.copycat.server.storage.compaction"><code>MinorCompactionTask</code></a></dd>
</dl>
</li>
</ul>
<a name="withMajorCompactionInterval-java.time.Duration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withMajorCompactionInterval</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withMajorCompactionInterval(<a href="http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html?is-external=true" title="class or interface in java.time">Duration</a>&nbsp;interval)</pre>
<div class="block">Sets the major compaction interval, returning the builder for method chaining.
 <p>
 The major compaction interval dictates the interval at which the
 <a href="../../../../../io/atomix/copycat/server/storage/compaction/MajorCompactionManager.html" title="class in io.atomix.copycat.server.storage.compaction"><code>MajorCompactionManager</code></a> should evaluate <a href="../../../../../io/atomix/copycat/server/storage/Segment.html" title="class in io.atomix.copycat.server.storage"><code>Segment</code></a>s
 in the log for major compaction. Because of the performance costs of major compaction, it is recommended that
 the major compaction interval be at least an order of magnitude greater than the minor compaction interval.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>interval</code> - The major compaction interval.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../io/atomix/copycat/server/storage/compaction/MajorCompactionManager.html" title="class in io.atomix.copycat.server.storage.compaction"><code>MajorCompactionManager</code></a>, 
<a href="../../../../../io/atomix/copycat/server/storage/compaction/MajorCompactionTask.html" title="class in io.atomix.copycat.server.storage.compaction"><code>MajorCompactionTask</code></a></dd>
</dl>
</li>
</ul>
<a name="withCompactionThreshold-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withCompactionThreshold</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.Builder.html" title="class in io.atomix.copycat.server.storage">Storage.Builder</a>&nbsp;withCompactionThreshold(double&nbsp;threshold)</pre>
<div class="block">Sets the percentage of entries in the segment that must be cleaned before a segment can be compacted,
 returning the builder for method chaining.
 <p>
 The compaction threshold is used during <a href="../../../../../io/atomix/copycat/server/storage/compaction/Compaction.html#MINOR"><code>minor compaction</code></a>
 to determine the set of segments to compact. By default, the compaction threshold is <code>0.5</code>. Increasing the
 compaction threshold will increase the number of <a href="../../../../../io/atomix/copycat/server/storage/entry/Entry.html" title="class in io.atomix.copycat.server.storage.entry"><code>entries</code></a> that
 must be cleaned from the segment before compaction and thus decrease the likelihood that a segment will be compacted.
 Conversely, decreasing the compaction threshold will increase the frequency of compaction at the cost of unnecessary
 I/O.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>threshold</code> - The segment compact threshold.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The storage builder.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../io/atomix/copycat/server/storage/compaction/MinorCompactionManager.html" title="class in io.atomix.copycat.server.storage.compaction"><code>MinorCompactionManager</code></a></dd>
</dl>
</li>
</ul>
<a name="build--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>build</h4>
<pre>public&nbsp;<a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage">Storage</a>&nbsp;build()</pre>
<div class="block">Builds the <a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><code>Storage</code></a> object.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://atomix.io/catalyst/api/latest/io/atomix/catalyst/util/Builder.html?is-external=true#build--" title="class or interface in io.atomix.catalyst.util">build</a></code>&nbsp;in class&nbsp;<code><a href="http://atomix.io/catalyst/api/latest/io/atomix/catalyst/util/Builder.html?is-external=true" title="class or interface in io.atomix.catalyst.util">Builder</a>&lt;<a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage">Storage</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The built storage configuration.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Storage.Builder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../io/atomix/copycat/server/storage/Storage.html" title="class in io.atomix.copycat.server.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../io/atomix/copycat/server/storage/StorageCleaner.html" title="class in io.atomix.copycat.server.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?io/atomix/copycat/server/storage/Storage.Builder.html" target="_top">Frames</a></li>
<li><a href="Storage.Builder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2013&#x2013;2016. All rights reserved.</small></p>
</body>
</html>
