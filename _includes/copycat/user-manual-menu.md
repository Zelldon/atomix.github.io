* [Raft servers](server)
   * [The server lifecycle](#server-lifecycle)
* [State machines](state-machine)
   * [Creating a state machine](#creating-a-state-machine)
   * [Defining state machine operations](#defining-state-machine-operations)
   * [Writing commands (writes)](#commands)
      * [Command consistency levels](#command-consistency-levels)
   * [Writing queries (reads)](#queries)
   * [Cleaning the commit log](#cleaning-the-commit-log)
   * [Accessing client sessions](#accessing-client-sessions)
   * [Publishing session events](#publishing-session-events)
   * [Working with time and scheduling](#working-with-time-and-scheduling)
* [Raft clients](client)
   * [The client lifecycle](#client-lifecycle)
   * [Submitting state machine operations](#submitting-state-machine-operations)
   * [Client sessions](#client-sessions)
* [Copycat internals](internals)
   * [1 Raft basics](#internal-raft-basics)
      * [1.1 Leader election](#internal-leader-election)
      * [1.2 Log replication](#internal-log-replication)
      * [1.3 Membership changes](#internal-membership-changes)
   * [2 The Copycat cluster](#internal-the-copycat-cluster)
   * [3 Client interaction](#internal-client-interaction)
      * [3.1 Sessions](#internal-sessions)
      * [3.2 Session lifecycle management](#internal-session-lifecycle-management)
      * [3.3 Commands](#internal-commands)
         * [3.3.1 Preserving program order](#internal-preserving-program-order)
         * [3.3.2 Linearizable semantics](#internal-linearizable-semantics)
      * [3.4 Queries](#internal-queries)
         * [3.4.1 Processing queries on followers](#internal-processing-queries-on-followers)
         * [3.4.2 Ensuring state progresses monotonically](#internal-ensuring-state-progresses-monotonically)
      * [3.5 Session expiration](#internal-session-expiration)
      * [3.6 Replicating server configurations](#internal-replicating-server-configurations)
      * [3.7 Ensuring time progresses monotonically](#internal-ensuring-time-progresses-monotonically)
      * [3.8 Preventing disruptions due to leader changes](#internal-preventing-disruptions-due-to-leader-changes)
   * [4 State machines](#internal-state-machines)
      * [4.1 Deterministic scheduling](#internal-deterministic-scheduling)
   * [5 Session events](#internal-session-events)
      * [5.1 Publishing events from the state machine](#internal-publishing-events-from-the-state-machine)
      * [5.2 Sequencing events on the client](#internal-sequencing-events-on-the-client)
      * [5.3 Managing server memory](#internal-managing-server-memory)
      * [5.4 Linearizable session events](#internal-linearizable-session-events)
      * [5.5 Recovering messages after a server failure](#internal-recovering-messages-after-a-server-failure)
      * [5.6 Managing log compaction](#internal-managing-log-compaction)
   * [6 Dynamic membership changes](#internal-dynamic-membership-changes)
      * [6.1 Active members](#internal-active-members)
      * [6.2 Passive members](#internal-passive-members)
      * [6.3 Reserve members](#internal-reserve-members)
      * [6.4 Passive replication](#internal-passive-replication)
      * [6.5 Promoting passive members](#internal-promoting-passive-members)
      * [6.6 Demoting active members](#internal-demoting-active-members)
      * [6.7 Determining availability](#internal-determining-availability)
   * [7 The Copycat log](#internal-the-copycat-log)
      * [7.1 Structure of the log](#internal-structure-of-the-log)
      * [7.2 Log indexes](#internal-log-indexes)
   * [8 Log compaction](#internal-log-compaction)
      * [8.1 Cleaning entries from the log](#internal-cleaning-entries-from-the-log)
      * [8.2 Basics of log compaction](#internal-basics-of-log-compaction)
      * [8.3 Combining log segments](#internal-combining-log-segments)
      * [8.4 Removing tombstones from the log](#internal-removing-tombstones-from-the-log)
      * [8.5 Ensuring tombstones are applied on all servers](#internal-ensuring-tombstones-are-applied-on-all-servers)
      * [8.6 Preventing race conditions in major compaction](#internal-preventing-race-conditions-in-major-compaction)
      * [8.7 Liveness in major compaction](#internal-liveness-in-major-compaction)
      * [8.8 Managing time and timeouts in a compacted log](#internal-managing-time-and-timeouts-in-a-compacted-log)
      * [8.9 Handling configuration changes](#internal-handling-configuration-changes)
      * [8.10 Implementing snapshots via log cleaning](#internal-implementing-snapshots-via-log-cleaning)
      * [8.11 Combining snapshots and log cleaning](#internal-combining-snapshots-and-log-cleaning)
      * [8.12 Managing session events for snapshotted logs](#internal-managing-session-events-for-snapshotted-logs)
