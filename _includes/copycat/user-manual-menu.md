* [Raft servers](server)
   * [The server lifecycle](#server-lifecycle)
* [State machines](state-machine)
   * [Creating a state machine](#creating-a-state-machine)
   * [Defining state machine operations](#defining-state-machine-operations)
   * [Writing commands (writes)](#commands)
      * [Command consistency levels](#command-consistency-levels)
   * [Writing queries (reads)](#queries)
   * [Cleaning the commit log](#cleaning-the-commit-log)
   * [Accessing client sessions](#accessing-client-sessions)
   * [Publishing session events](#publishing-session-events)
   * [Working with time and scheduling](#working-with-time-and-scheduling)
* [Raft clients](client)
   * [The client lifecycle](#client-lifecycle)
   * [Submitting state machine operations](#submitting-state-machine-operations)
   * [Client sessions](#client-sessions)
* [Copycat internals](internals)
   * [1 Raft basics](#raft-basics)
      * [1.1 Leader election](#leader-election-basics)
      * [1.2 Log replication](#log-replication-basics)
      * [1.3 Membership changes](#membership-changes-basics)
   * [2 The Copycat cluster](#the-copycat-cluster)
   * [3 Client interaction](#client-interaction)
      * [3.1 Sessions](#client-sessions)
      * [3.2 Session lifecycle management](#session-lifecycle-management)
      * [3.3 Commands](#client-commands)
         * [3.3.1 Preserving program order](#preserving-program-order)
         * [3.3.2 Linearizable semantics](#linearizable-semantics)
      * [3.4 Queries](#client-queries)
         * [3.4.1 Processing queries on followers](#processing-queries-on-followers)
         * [3.4.2 Ensuring state progresses monotonically](#ensuring-state-progresses-monotonically)
      * [3.5 Session expiration](#session-expiration)
      * [3.6 Replicating server configurations](#replicating-server-configurations)
      * [3.7 Ensuring time progresses monotonically](#ensuring-time-progresses-monotonically)
      * [3.8 Preventing disruptions due to leader changes](#preventing-disruptions-due-to-leader-changes)
   * [4 State machines](#state-machines)
      * [4.1 Deterministic scheduling](#deterministic-scheduling)
   * [5 Session events](#session-events)
      * [5.1 Publishing events from the state machine](#publishing-events-from-the-state-machine)
      * [5.2 Sequencing events on the client](#sequencing-events-on-the-client)
      * [5.3 Managing server memory](#managing-server-memory)
      * [5.4 Linearizable session events](#linearizable-session-events)
      * [5.5 Recovering messages after a server failure](#recovering-messages-after-a-server-failure)
      * [5.6 Managing log compaction](#managing-log-compaction)
   * [6 Membership changes](#membership-changes)
      * [6.1 Active members](#active-members)
      * [6.2 Passive members](#passive-members)
      * [6.3 Reserve members](#reserve-members)
      * [6.4 Passive replication](#passive-replication)
      * [6.5 Promoting passive members](#promoting-passive-members)
      * [6.6 Demoting active members](#demoting-active-members)
      * [6.7 Determining availability](#determining-availability)
   * [7 The Copycat log](#the-copycat-log)
      * [7.1 Structure of the log](#log-structure)
      * [7.2 Log indexes](#log-indexes)
   * [8 Log compaction](#log-compaction)
      * [8.1 Cleaning entries from the log](#log-cleaning)
      * [8.2 Basics of log compaction](#log-compaction-basics)
      * [8.3 Combining log segments](#log-segment-compaction)
      * [8.4 Removing tombstones from the log](#log-tombstones)
      * [8.5 Ensuring tombstones are applied on all servers](#log-tombstone-safety)
      * [8.6 Preventing race conditions in major compaction](#major-compaction-safety)
      * [8.7 Liveness in major compaction](#major-compaction-liveness)
      * [8.8 Managing time and timeouts in a compacted log](#log-compaction-time)
      * [8.9 Handling membership changes in log compaction](#log-compaction-membership-changes)
      * [8.10 Implementing snapshots via log cleaning](#snapshots)
      * [8.11 Combining snapshots and log cleaning](#log-cleaning-snapshots)
      * [8.12 Managing session events for snapshotted logs](#snapshot-session-events)
